{"mappings":"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","sources":["src/js/index.js"],"sourcesContent":["const API_URL = 'https://673c7b8396b8dcd5f3fa3fd7.mockapi.io/beauty';\n\nconst calendarTable = document.getElementById('calendar-table');\nconst modal = document.getElementById('modal');\nconst form = document.getElementById('booking-form');\nconst nameInput = document.getElementById('name-input');\nconst phoneInput = document.getElementById('phone-input');\nconst prevWeekBtn = document.getElementById('prev-week');\nconst nextWeekBtn = document.getElementById('next-week');\nconst modalBtn = document.getElementById('modal_btn');\nconst bookingBtn = document.querySelectorAll('.btn_booking');\n\nlet currentWeekStart = new Date();\nlet bookedSlots = [];\nlet pendingBooking = null;\n\nconst weekDays = ['ПН', 'ВТ', 'СР', 'ЧТ', 'ПТ', 'СБ', 'НД'];\nconst timeSlots = [\n  '09:00',\n  '10:00',\n  '11:00',\n  '12:00',\n  '13:00',\n  '14:00',\n  '15:00',\n  '16:00',\n];\nconst services = ['Манікюр/педикюр', 'Макіяж', 'Брови/Вії'];\n\nfunction formatDate(date) {\n  return date.toISOString().split('T')[0];\n}\n\nfunction generateWeek(startDate) {\n  const week = [];\n  for (let i = 0; i < 7; i++) {\n    const date = new Date(startDate);\n    date.setDate(date.getDate() + i);\n    week.push(date);\n  }\n  return week;\n}\n\nasync function fetchBookedSlots() {\n  try {\n    const response = await fetch(API_URL);\n    if (!response.ok)\n      throw new Error('Помилка завантаження даних по бронювання');\n    bookedSlots = await response.json();\n    generateCalendar();\n  } catch (error) {\n    console.error('Помилка:', error);\n  }\n}\n\nfunction isServiceBooked(date, time, service) {\n  return bookedSlots.some(\n    slot => slot.date === date && slot.time === time && slot.service === service\n  );\n}\n\nfunction openModal(key, service) {\n  pendingBooking = { key, service };\n  modal.classList.add('active');\n}\n\nfunction openModalBtn() {\n  modalBtn.style.display = 'flex';\n}\n\nfunction closeModal() {\n  modal.classList.remove('active');\n  pendingBooking = null;\n  modalBtn.style.display = 'none';\n}\n\nbookingBtn.forEach(button => {\n  button.addEventListener('click', openModalBtn);\n});\n\ndocument.querySelectorAll('.close-btn').forEach(button => {\n  button.addEventListener('click', closeModal);\n});\n\nwindow.addEventListener('click', event => {\n  if (event.target === modal || event.target === modalBtn) closeModal();\n});\n\nfunction generateCalendar() {\n  const currentDate = new Date();\n  const week = generateWeek(currentWeekStart);\n  const currentTime = currentDate.toTimeString().slice(0, 5);\n\n  if (currentWeekStart <= currentDate) {\n    prevWeekBtn.classList.add('hidden');\n  } else {\n    prevWeekBtn.classList.remove('hidden');\n  }\n\n  calendarTable.innerHTML = '';\n\n  const headerRow = document.createElement('tr');\n  headerRow.innerHTML = `\n    <th></th>\n    ${week\n      .map(\n        day =>\n          `<th>${day.toLocaleDateString('uk-UA', {\n            month: 'short',\n            day: '2-digit',\n            weekday: 'short',\n          })}</th>`\n      )\n      .join('')\n      .toUpperCase()}\n  `;\n  headerRow.classList.add('headerRowContent');\n  calendarTable.appendChild(headerRow);\n\n  timeSlots.forEach(time => {\n    const row = document.createElement('tr');\n\n    const timeCell = document.createElement('td');\n    timeCell.textContent = time;\n    timeCell.classList.add('timeCellTime');\n    row.appendChild(timeCell);\n\n    week.forEach(date => {\n      const key = `${formatDate(date)} ${time}`;\n      const cell = document.createElement('td');\n\n      const isToday = date.toDateString() === currentDate.toDateString();\n      const isPast = date < currentDate && isToday && time <= currentTime;\n\n      if (isPast) {\n        cell.classList.add('disabled');\n        cell.textContent = '';\n      } else {\n        services.forEach(service => {\n          const isBooked = isServiceBooked(formatDate(date), time, service);\n          const button = document.createElement('button');\n          button.textContent = service;\n          button.disabled = isBooked;\n          button.classList.add('calendarServisesContent');\n\n          if (isBooked) {\n            button.classList.add('disabled');\n          }\n\n          button.addEventListener('click', () => openModal(key, service));\n          cell.appendChild(button);\n        });\n      }\n      row.appendChild(cell);\n    });\n\n    calendarTable.appendChild(row);\n  });\n}\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  if (!pendingBooking) {\n    alert('Дані про бронювання відсутні. Спробуйте знову.');\n    return;\n  }\n\n  const name = nameInput.value;\n  const phone = phoneInput.value;\n  const [date, time] = pendingBooking.key.split(' ');\n  const booking = { date, time, service: pendingBooking.service, name, phone };\n\n  try {\n    const response = await fetch(API_URL, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(booking),\n    });\n\n    if (response.ok) {\n      bookedSlots.push(await response.json());\n      closeModal();\n      nameInput.value = '';\n      phoneInput.value = '';\n      generateCalendar();\n      alert(\n        `Бронювання підтверджено на ${date} ${time} (${pendingBooking.service}).`\n      );\n    } else {\n      alert('Помилка при бронюванні.');\n    }\n  } catch (error) {\n    console.error('Помилка мережі:', error);\n  }\n});\n\nnextWeekBtn.addEventListener('click', () => {\n  currentWeekStart.setDate(currentWeekStart.getDate() + 7);\n  fetchBookedSlots();\n});\n\nprevWeekBtn.addEventListener('click', () => {\n  currentWeekStart.setDate(currentWeekStart.getDate() - 7);\n  fetchBookedSlots();\n});\n\nfetchBookedSlots();\n"],"names":["$85a5f86b715fe7db$var$calendarTable","document","getElementById","$85a5f86b715fe7db$var$modal","$85a5f86b715fe7db$var$form","$85a5f86b715fe7db$var$nameInput","$85a5f86b715fe7db$var$phoneInput","$85a5f86b715fe7db$var$prevWeekBtn","$85a5f86b715fe7db$var$nextWeekBtn","$85a5f86b715fe7db$var$modalBtn","$85a5f86b715fe7db$var$bookingBtn","querySelectorAll","$85a5f86b715fe7db$var$currentWeekStart","Date","$85a5f86b715fe7db$var$bookedSlots","$85a5f86b715fe7db$var$pendingBooking","$85a5f86b715fe7db$var$timeSlots","$85a5f86b715fe7db$var$services","$85a5f86b715fe7db$var$formatDate","date","toISOString","split","async","$85a5f86b715fe7db$var$fetchBookedSlots","response","fetch","ok","Error","json","$85a5f86b715fe7db$var$generateCalendar","error","console","$85a5f86b715fe7db$var$openModalBtn","style","display","$85a5f86b715fe7db$var$closeModal","classList","remove","currentDate","week","startDate","i","setDate","getDate","push","$85a5f86b715fe7db$var$generateWeek","currentTime","toTimeString","slice","add","innerHTML","headerRow","createElement","map","day","toLocaleDateString","month","weekday","join","toUpperCase","appendChild","forEach","time","row","timeCell","textContent","key","cell","isToday","toDateString","service","isBooked","some","slot","$85a5f86b715fe7db$var$isServiceBooked","button","disabled","addEventListener","$85a5f86b715fe7db$var$openModal","window","event","target","preventDefault","alert","name","value","phone","booking","method","headers","body","JSON","stringify"],"version":3,"file":"index.aa05ab08.js.map"}