const e=document.getElementById("calendar-table"),t=document.getElementById("modal"),n=document.getElementById("booking-form"),a=document.getElementById("name-input"),o=document.getElementById("phone-input"),c=document.getElementById("prev-week"),d=document.getElementById("next-week"),i=document.getElementById("modal_btn"),s=document.querySelectorAll(".btn_booking");let l=new Date,r=[],m=null;const u=["09:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00"],h=["Манікюр/педикюр","Макіяж","Брови/Вії"];function p(e){return e.toISOString().split("T")[0]}async function f(){try{const e=await fetch("https://673c7b8396b8dcd5f3fa3fd7.mockapi.io/beauty");if(!e.ok)throw new Error("Помилка завантаження даних по бронювання");r=await e.json(),v()}catch(e){console.error("Помилка:",e)}}function y(){i.style.display="flex"}function E(){t.classList.remove("active"),m=null,i.style.display="none"}function v(){const n=new Date,a=function(e){const t=[];for(let n=0;n<7;n++){const a=new Date(e);a.setDate(a.getDate()+n),t.push(a)}return t}(l);l<=new Date?c.classList.add("hidden"):c.classList.remove("hidden"),e.innerHTML="";const o=document.createElement("tr");o.innerHTML=`\n    <th></th>\n    ${a.map((e=>`<th>${e.toLocaleDateString("uk-UA",{month:"short",day:"2-digit",weekday:"short"})}</th>`)).join("").toUpperCase()}\n  `,o.classList.add("headerRowContent"),e.appendChild(o),u.forEach((o=>{const c=document.createElement("tr"),d=document.createElement("td");d.textContent=o,d.classList.add("timeCellTime"),c.appendChild(d),a.forEach((e=>{const a=`${p(e)} ${o}`,d=document.createElement("td");e<n||e.toDateString()===n.toDateString()&&o<=n.toTimeString().slice(0,5)?(d.classList.add("disabled"),d.textContent=""):h.forEach((n=>{const c=function(e,t,n){return r.some((a=>a.date===e&&a.time===t&&a.service===n))}(p(e),o,n),i=document.createElement("button");i.textContent=n,i.disabled=c,i.classList.add("calendarServisesContent"),c&&i.classList.add("disabled"),i.addEventListener("click",(()=>function(e,n){m={key:e,service:n},t.classList.add("active")}(a,n))),d.appendChild(i)})),c.appendChild(d)})),e.appendChild(c)}))}s.forEach((e=>{e.addEventListener("click",y)})),document.querySelectorAll(".close-btn").forEach((e=>{e.addEventListener("click",E)})),window.addEventListener("click",(e=>{e.target!==t&&e.target!==i||E()})),n.addEventListener("submit",(async e=>{if(e.preventDefault(),!m)return void alert("Дані про бронювання відсутні. Спробуйте знову.");const t=a.value,n=o.value,[c,d]=m.key.split(" "),i={date:c,time:d,service:m.service,name:t,phone:n};try{const e=await fetch("https://673c7b8396b8dcd5f3fa3fd7.mockapi.io/beauty",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});e.ok?(r.push(await e.json()),E(),a.value="",o.value="",v(),alert(`Бронювання підтверджено на ${c} ${d} (${m.service}).`)):alert("Помилка при бронюванні.")}catch(e){console.error("Помилка мережі:",e)}})),d.addEventListener("click",(()=>{l.setDate(l.getDate()+7),f()})),c.addEventListener("click",(()=>{l.setDate(l.getDate()-7),f()})),f();
//# sourceMappingURL=index.e3307ea1.js.map
