{"mappings":"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","sources":["src/index.js"],"sourcesContent":["const API_URL = 'https://673c7b8396b8dcd5f3fa3fd7.mockapi.io/beauty';\n\nconst calendarTable = document.getElementById('calendar-table');\nconst modal = document.getElementById('modal');\nconst form = document.getElementById('booking-form');\nconst nameInput = document.getElementById('name-input');\nconst phoneInput = document.getElementById('phone-input');\nconst prevWeekBtn = document.getElementById('prev-week');\nconst nextWeekBtn = document.getElementById('next-week');\nconst modalBtn = document.getElementById('modal_btn');\nconst bookingBtn = document.querySelectorAll('.btn_booking');\n\nlet currentWeekStart = new Date();\nlet bookedSlots = [];\nlet pendingBooking = null;\n\nconst weekDays = ['ПН', 'ВТ', 'СР', 'ЧТ', 'ПТ', 'СБ', 'НД'];\nconst timeSlots = [\n  '09:00',\n  '10:00',\n  '11:00',\n  '12:00',\n  '13:00',\n  '14:00',\n  '15:00',\n  '16:00',\n];\nconst services = ['Манікюр/педикюр', 'Макіяж', 'Брови/Вії'];\n\nfunction formatDate(date) {\n  return date.toISOString().split('T')[0];\n}\n\nfunction generateWeek(startDate) {\n  const week = [];\n  for (let i = 0; i < 7; i++) {\n    const date = new Date(startDate);\n    date.setDate(date.getDate() + i);\n    week.push(date);\n  }\n  return week;\n}\n\nasync function fetchBookedSlots() {\n  try {\n    const response = await fetch(API_URL);\n    if (!response.ok)\n      throw new Error('Помилка завантаження даних по бронювання');\n    bookedSlots = await response.json();\n    generateCalendar();\n  } catch (error) {\n    console.error('Помилка:', error);\n  }\n}\n\nfunction isServiceBooked(date, time, service) {\n  return bookedSlots.some(\n    slot => slot.date === date && slot.time === time && slot.service === service\n  );\n}\n\nfunction openModal(key, service) {\n  pendingBooking = { key, service };\n  modal.classList.add('active');\n}\n\nfunction openModalBtn() {\n  modalBtn.style.display = 'flex';\n}\n\nfunction closeModal() {\n  modal.classList.remove('active');\n  pendingBooking = null;\n  modalBtn.style.display = 'none';\n}\n\nbookingBtn.forEach(button => {\n  button.addEventListener('click', openModalBtn);\n});\n\ndocument.querySelectorAll('.close-btn').forEach(button => {\n  button.addEventListener('click', closeModal);\n});\n\nwindow.addEventListener('click', event => {\n  if (event.target === modal || event.target === modalBtn) closeModal();\n});\n\nfunction generateCalendar() {\n  const currentDate = new Date();\n  const week = generateWeek(currentWeekStart);\n  if (currentWeekStart <= new Date()) {\n    prevWeekBtn.classList.add('hidden');\n  } else {\n    prevWeekBtn.classList.remove('hidden');\n  }\n\n  calendarTable.innerHTML = '';\n\n  const headerRow = document.createElement('tr');\n  headerRow.innerHTML = `\n    <th></th>\n    ${week\n      .map(\n        day =>\n          `<th>${day.toLocaleDateString('uk-UA', {\n            month: 'short',\n            day: '2-digit',\n            weekday: 'short',\n          })}</th>`\n      )\n      .join('')\n      .toUpperCase()}\n  `;\n  headerRow.classList.add('headerRowContent');\n  calendarTable.appendChild(headerRow);\n\n  timeSlots.forEach(time => {\n    const row = document.createElement('tr');\n\n    const timeCell = document.createElement('td');\n    timeCell.textContent = time;\n    timeCell.classList.add('timeCellTime');\n    row.appendChild(timeCell);\n\n    week.forEach(date => {\n      const key = `${formatDate(date)} ${time}`;\n      const cell = document.createElement('td');\n\n      const isPast =\n        date < currentDate ||\n        (date.toDateString() === currentDate.toDateString() &&\n          time <= currentDate.toTimeString().slice(0, 5));\n\n      if (isPast) {\n        cell.classList.add('disabled');\n        cell.textContent = '';\n      } else {\n        services.forEach(service => {\n          const isBooked = isServiceBooked(formatDate(date), time, service);\n          const button = document.createElement('button');\n          button.textContent = service;\n          button.disabled = isBooked;\n          button.classList.add('calendarServisesContent');\n\n          if (isBooked) {\n            button.classList.add('disabled');\n          }\n\n          button.addEventListener('click', () => openModal(key, service));\n          cell.appendChild(button);\n        });\n      }\n      row.appendChild(cell);\n    });\n\n    calendarTable.appendChild(row);\n  });\n}\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  if (!pendingBooking) {\n    alert('Дані про бронювання відсутні. Спробуйте знову.');\n    return;\n  }\n\n  const name = nameInput.value;\n  const phone = phoneInput.value;\n  const [date, time] = pendingBooking.key.split(' ');\n  const booking = { date, time, service: pendingBooking.service, name, phone };\n\n  try {\n    const response = await fetch(API_URL, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(booking),\n    });\n\n    if (response.ok) {\n      bookedSlots.push(await response.json());\n      closeModal();\n      nameInput.value = '';\n      phoneInput.value = '';\n      generateCalendar();\n      alert(\n        `Бронювання підтверджено на ${date} ${time} (${pendingBooking.service}).`\n      );\n    } else {\n      alert('Помилка при бронюванні.');\n    }\n  } catch (error) {\n    console.error('Помилка мережі:', error);\n  }\n});\n\nnextWeekBtn.addEventListener('click', () => {\n  currentWeekStart.setDate(currentWeekStart.getDate() + 7);\n  fetchBookedSlots();\n});\n\nprevWeekBtn.addEventListener('click', () => {\n  currentWeekStart.setDate(currentWeekStart.getDate() - 7);\n  fetchBookedSlots();\n});\n\nfetchBookedSlots();\n"],"names":["$1f0dc3b9307be026$var$calendarTable","document","getElementById","$1f0dc3b9307be026$var$modal","$1f0dc3b9307be026$var$form","$1f0dc3b9307be026$var$nameInput","$1f0dc3b9307be026$var$phoneInput","$1f0dc3b9307be026$var$prevWeekBtn","$1f0dc3b9307be026$var$nextWeekBtn","$1f0dc3b9307be026$var$modalBtn","$1f0dc3b9307be026$var$bookingBtn","querySelectorAll","$1f0dc3b9307be026$var$currentWeekStart","Date","$1f0dc3b9307be026$var$bookedSlots","$1f0dc3b9307be026$var$pendingBooking","$1f0dc3b9307be026$var$timeSlots","$1f0dc3b9307be026$var$services","$1f0dc3b9307be026$var$formatDate","date","toISOString","split","async","$1f0dc3b9307be026$var$fetchBookedSlots","response","fetch","ok","Error","json","$1f0dc3b9307be026$var$generateCalendar","error","console","$1f0dc3b9307be026$var$openModalBtn","style","display","$1f0dc3b9307be026$var$closeModal","classList","remove","currentDate","week","startDate","i","setDate","getDate","push","$1f0dc3b9307be026$var$generateWeek","add","innerHTML","headerRow","createElement","map","day","toLocaleDateString","month","weekday","join","toUpperCase","appendChild","forEach","time","row","timeCell","textContent","key","cell","toDateString","toTimeString","slice","service","isBooked","some","slot","$1f0dc3b9307be026$var$isServiceBooked","button","disabled","addEventListener","$1f0dc3b9307be026$var$openModal","window","event","target","preventDefault","alert","name","value","phone","booking","method","headers","body","JSON","stringify"],"version":3,"file":"index.e3307ea1.js.map"}